<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vehicle Location</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Add your CSS stylesheets here -->
  <link rel="stylesheet" href="static/css/style.css" />
  
  <!-- Load the Google Maps API with the callback parameter -->
  
  <script>
    // define the locations variable as a global variable
    var locations = [];
    
    // populate the locations array with data from the server
    "{% for loc in location %}"
    locations.push({
        lat: parseFloat("{{ loc['lat'] }}"),
        lng: parseFloat("{{ loc['lng'] }}"),
        timestamp: "{{ loc['timestamp'] }}"
      });
    "{% endfor %}"
    
    // create a map object
    function initMap() {
      // get latitude and longitude values from the first location
      var lat = locations[0].lat;
      var lng = locations[0].lng;
      var map = document.getElementById('map'); // Ensure the correct element ID is used
    
        var map = new google.maps.Map(map, {
          center: { lat: lat, lng: lng },
          zoom: 12
        });
      
      // create the map using the provided mapDiv element
      // var map = new google.maps.Map(document.getElementById('map'), {
      //   center: { lat: lat, lng: lng },
      //   zoom: 12
      // });
      
      // loop through locations and add markers to the map
      for (var i = 0; i < locations.length; i++) {
        var location = locations[i];
        var latLng = new google.maps.LatLng(location.lat, location.lng);
        var marker = new google.maps.Marker({
          position: latLng,
          map: map,
          title: location.timestamp
        });
      }
    }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcZREyA3Z0ALYAaciq1043Fya3-2dSL1E&callback=initMap"></script>

</head>
<body>
  <body onload="initMap()"></body>
  <div id="map" style="height: 600px;"></div>
  <div class="register-container">
    <div class="register-contact">
      <div class="register-container2">
        <div class="register-container3">
          <div class="search-vehicle-container3"></div>
          <div class="search-vehicle-container4"></div>
        </div>
        <div class="register-container2">
          <div class="register-container3">
            {% if location %}
            <table>
              <thead>
                <tr>
                  <th>Latitude</th>
                  <th>Longitude</th>
                  <th>Timestamp</th>
                </tr>
              </thead>
              <tbody>
                {% for loc in location %}
                <tr>
                  <td>{{ loc['lat'] }}</td>
                  <td>{{ loc['lng'] }}</td>
                  <td>{{ loc['timestamp'] }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            {% else %}
            <p>No locations found for this vehicle.</p>
            {% endif %}
          </div>
        </div>
        <div class="search-vehicle-container5">
          <div id="map" style="height: 600px;"></div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>




  
<!-- old design for Location -->


  
      


<!-- ---------------------------------FOOTER STARTS FROM HERE ---------------------------------------------->

<footer class="footer-footer">
  <div class="footer-container">
  <div class="footer-container1">
    <span>This project is created by UIT Students</span>
  </div>
  <div class="footer-container2">
    <div class="footer-container3">
      <span class="footer-text1 Large">TEAM MEMBERS</span>
      <span class="footer-text2 Large">ADNAN SAMAD</span>
      <span class="footer-text3">MUHAMMAD OMER SIDDIQUI</span>
      <span class="footer-text4 Large">ALISHA HAMEED</span>
      <span class="footer-text5 Large">HAFIZ TAHA SHARIF</span>
    </div>
  </div>
  </div>
  <img
  alt="image"
  src="static/css/photos/waves-white.svg"
  class="footer-image"
  />
  </footer>
  
  <!-- --------------------------------FOOTER ENDS HERE ---------------------------------------------------------------->
  
  <!-- --------------------------------HEADER STRATS FROM HERE --------------------------------------------->
  
  <div data-role="Header" class="header-header">
  <nav class="header-nav">
  <div class="header-container">
    <a>
      Vehicle Detection System
    </a>
    <div class="header-full-container1">
  
      <a class="header-navlink1 Large" href="/register">Register </a>
      <a class="header-navlink1 Large" href="/search_user">Search Owner </a>
      <a class="header-navlink1 Large" href="/search">Search Vehicle </a>
      <a class="header-navlink1 Large" href="/all_vehicles">Vehicle List </a>
      <a class="header-navlink1 Large" href="/vehicle_location">Vehicle Location </a>
      <a class="header-navlink1 Large" href="/create_officer">Create Officer </a>

    </div>
    <div class="header-container1">
      <div class="header-container2">
        <a href="logout" class="header-navlink6">
          <div class="primary-pink-button-container">
            <button
              class="primary-pink-button-button button ButtonSmall"
            >
              <span>SIGN OUT</span>
            </button>
          </div>
        </a>
      </div>
    </div>
  </div>
  </nav>
  </div>
  </div>
  </div>
  </div>
  <script src="https://unpkg.com/@teleporthq/teleport-custom-scripts"></script>
  </body>
  </html>
  
  <!-------------------------------------- HEADER ENDS HERE -------------------------------------------------->

